<view class="page">
  <view class="profile-card">
    <button class="avatar-btn" open-type="chooseAvatar" bindchooseavatar="onChooseAvatar" disabled="{{saving}}">
      <image wx:if="{{form.avatar}}" class="avatar" mode="aspectFill" src="{{form.avatar}}"></image>
      <view wx:else class="avatar-fallback">{{currentUser.initial}}</view>
    </button>
    <view class="avatar-tip">点击头像可更换</view>

    <view class="name-wrap">
      <input
        class="name-input"
        type="nickname"
        maxlength="24"
        placeholder="请输入昵称"
        value="{{form.name}}"
        bindinput="onNameInput"
      />
    </view>
  </view>

  <button class="save-btn" bindtap="onSaveProfile" loading="{{saving}}" disabled="{{saving}}">
    {{saving ? '保存中...' : '保存资料'}}
  </button>

  <button class="logout-btn" bindtap="onLogout" loading="{{loggingOut}}" disabled="{{loggingOut}}">
    {{loggingOut ? '退出中...' : '退出登录'}}
  </button>
</view>
