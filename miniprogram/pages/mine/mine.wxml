<view class="page">
  <view class="profile-card">
    <view class="avatar-wrap">
      <image wx:if="{{currentUser.avatar}}" class="avatar" mode="aspectFill" src="{{currentUser.avatar}}"></image>
      <view wx:else class="avatar-fallback">{{currentUser.initial}}</view>
    </view>
    <view class="name">{{currentUser.name}}</view>
    <view class="tip">当前登录用户</view>
  </view>

  <view class="form-card">
    <view class="label">昵称</view>
    <input class="input" placeholder="请输入昵称" maxlength="24" value="{{form.name}}" bindinput="onNameInput" />

    <view class="label">头像 URL</view>
    <input
      class="input"
      placeholder="请输入头像地址（https://...）"
      value="{{form.avatar}}"
      bindinput="onAvatarInput"
    />

    <button class="ghost" bindtap="syncByWechat" loading="{{syncingWechat}}" disabled="{{saving || syncingWechat}}">
      {{syncingWechat ? '获取中...' : '使用微信资料填充'}}
    </button>
    <button class="primary" bindtap="submitProfile" loading="{{saving}}" disabled="{{saving}}">
      {{saving ? '保存中...' : '保存资料'}}
    </button>
  </view>
</view>
