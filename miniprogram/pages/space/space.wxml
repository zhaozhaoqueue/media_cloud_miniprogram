<view class="page">
  <view class="header">
    <view class="space-title-row">
      <view class="space-name">{{spaceName}}</view>
      <view class="edit-name-trigger" bindtap="editSpaceName">修改名称</view>
    </view>
    <view class="space-meta">{{photoCount}} 张图片 · {{memberCount}} 人</view>
  </view>

  <view class="toolbar">
    <button class="primary" bindtap="goUpload">上传图片</button>
    <button class="ghost" bindtap="shareSpace">生成分享码</button>
  </view>

  <view class="share-card" wx:if="{{shareCode}}">
    <view class="share-title">空间分享码</view>
    <view class="share-code">{{shareCode}}</view>
    <view class="share-meta">有效期 {{shareExpireText}}</view>
    <button class="ghost" bindtap="copyShareCode">复制分享码</button>
  </view>

  <view class="grid">
    <view class="photo" wx:for="{{photos}}" wx:key="id" bindtap="openImage" data-id="{{item.id}}">
      <image class="photo-img" mode="aspectFill" src="{{item.displayUrl}}"></image>
      <view class="photo-mask">
        <view class="photo-name">{{item.name}}</view>
      </view>
    </view>
  </view>

  <view class="list-empty" wx:if="{{showEmptyState}}">暂无图片</view>
  <view class="list-status" wx:if="{{loadingMorePhotos}}">正在加载更多...</view>
  <view class="list-status" wx:if="{{showNoMoreState}}">
    没有更多图片了
  </view>
</view>
