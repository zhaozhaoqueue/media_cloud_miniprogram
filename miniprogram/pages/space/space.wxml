<view class="page">
  <view class="header">
    <view class="space-title-row">
      <view class="space-name">{{spaceName}}</view>
      <view class="edit-name-trigger" bindtap="editSpaceName">修改名称</view>
    </view>
    <view class="space-meta">{{photoCount}} 张图片 · {{memberCount}} 人</view>
  </view>

  <view class="toolbar">
    <button class="primary" bindtap="goUpload">上传图片</button>
    <button class="ghost" bindtap="shareSpace">生成分享码</button>
  </view>

  <view class="grid">
    <view class="photo" wx:for="{{photos}}" wx:key="id" bindtap="openImage" data-id="{{item.id}}">
      <image class="photo-img" mode="aspectFill" src="{{item.displayUrl}}"></image>
      <view class="photo-mask">
        <view class="photo-name">{{item.name}}</view>
      </view>
    </view>
  </view>

  <view class="list-empty" wx:if="{{showEmptyState}}">暂无图片</view>
  <view class="list-status" wx:if="{{loadingMorePhotos}}">正在加载更多...</view>
  <view class="list-status" wx:if="{{showNoMoreState}}">
    没有更多图片了
  </view>

  <view class="popup-mask" wx:if="{{showSharePopup}}" bindtap="onCloseSharePopup">
    <view class="popup-card" catchtap="onPopupTap">
      <view class="popup-title">空间分享码</view>
      <view class="popup-note">{{spaceName}}</view>
      <view class="popup-code">{{shareCode}}</view>
      <view class="popup-expire">有效期至 {{shareExpireText}}</view>
      <view class="popup-actions">
        <button class="ghost" bindtap="onCloseSharePopup">关闭</button>
        <button class="primary" bindtap="copyShareCode">复制</button>
      </view>
    </view>
  </view>
</view>
