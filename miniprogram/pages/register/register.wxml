<view class="page">
  <view class="hero">
    <view class="title">完成注册</view>
    <view class="subtitle">请补充头像、昵称与 accessCode，注册成功后自动进入主页</view>
  </view>

  <view class="card">
    <view class="input-label">头像 URL</view>
    <input
      class="text-input"
      placeholder="请输入头像地址（https://...）"
      value="{{avatar}}"
      bindinput="onAvatarInput"
    />
    <image wx:if="{{avatar}}" class="avatar-preview" mode="aspectFill" src="{{avatar}}"></image>

    <view class="input-label">昵称</view>
    <input
      class="text-input"
      placeholder="请输入昵称"
      maxlength="20"
      value="{{nickname}}"
      bindinput="onNicknameInput"
    />

    <view class="input-label">accessCode</view>
    <input
      class="text-input"
      placeholder="请输入 accessCode"
      maxlength="64"
      value="{{accessCode}}"
      bindinput="onAccessCodeInput"
    />

    <button class="ghost" bindtap="fillByWechatProfile" loading="{{fetchingProfile}}" disabled="{{loading}}">
      {{fetchingProfile ? '获取中...' : '使用微信头像和昵称'}}
    </button>

    <button class="primary" bindtap="handleRegister" loading="{{loading}}" disabled="{{!canSubmit || loading}}">
      {{loading ? '注册中...' : '提交注册'}}
    </button>
  </view>
</view>
